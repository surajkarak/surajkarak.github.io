<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>What my RunKeeper data says about my cardio habits | Suraj Karakulath</title> <meta name="author" content="Suraj Karakulath"> <meta name="description" content="I analysed my RunKeeper data for free to see trends in distance, calories burned and more"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://surajkarak.github.io/projects/RunKeeper-Data-Visualization/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-HCHG0834FS"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-HCHG0834FS");</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">Suraj Karakulath</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/"></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repositories</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV</a> </li> <li class="nav-item "> <a class="nav-link" href="/contact/">Contact</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">What my RunKeeper data says about my cardio habits</h1> <p class="post-description">I analysed my RunKeeper data for free to see trends in distance, calories burned and more</p> </header> <article> <p>This is a simple idea for a sideproject that came to me as I was thinking about my daily routine and how it has changed over the years.</p> <p>I had ignored my health for a long time in my late twenties and early thirties. But then during the COVID lockdowns and the years following it, I managed to get a decent healthy routine going, where I would get out and walk/run as often as I could. I have a preference for doing this kind of thing at the end of a day, after work. And although I couldn’t do it every day due to work commitments and feeling exhausted, I told myself I would try and get some steps in every few days - at least something.</p> <p>There are phases when I get on a decent streak. But at other times, and days when I felt like I was being lazy, I wanted to try and recall how I felt during the good streaks, how and when I got my runs in, hoping to get inspired again.</p> <p>Most people do this kind of analysis easily with their smart watches, FitBit, fitness tracker, heart rate monitor or other wearable device automatically tracking data and showing reports in real-time. Unfortunately, I don’t use any of those dedicated devices. But I do take my old phone, without a SIM card, start the RunKeeper app and listen to podcasts which I have downloaded beforehand. I thought I could try and analyse the data from RunKeeper to see how I have been doing.</p> <h2 id="what-i-used">What I used</h2> <ul> <li>Python in Visual Studio for extraction and analysis</li> <li>Standard data analysis packages - pandas, numpy</li> <li>Packages for visualisation - matplotlib, seaborn, plotly</li> <li>The pvlib library for solar position calculations</li> </ul> <h2 id="data-collection">Data collection</h2> <p>Not as straightforward as I had expected. The first problem was that there was no automatic way to extract the data from RunKeeper.</p> <ul> <li>There is an Insights feature in the mobile app but it is not available in the free version and you have to pay for an upgrade.</li> <li>The web interface is quite clunky and although there is a Reports dashboard showing distances covered per month, seeing more granular data and downloading anything requires a pro subscription again.</li> <li>Managed to go Settings and find an “Export Data” option. Even this didn’t work at first but I tried after a few weeks and then I was able to download a zip file.</li> </ul> <p>Finally! This had what I needed. There is a csv file listing all my recorded cardio activities and also other files for heart rate, measurements and such which I hadn’t recorded regularly. I read the cardio csv file into a dataframe.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/runkeeper/cardio_table-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/runkeeper/cardio_table-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/runkeeper/cardio_table-1400.webp"></source> <img src="/assets/img/runkeeper/cardio_table.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Cardio data" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>The cardio dataframe has 361 rows and 9 columns. The main variables of note are:</p> <ol> <li> <strong>Activity Id</strong> : A unique identifier for each activity.</li> <li> <strong>Date</strong> : Date and time of the activity in date-time format.</li> <li> <strong>Distance (km)</strong> : Distance covered during the activity, in km.</li> <li> <strong>Duration</strong> : Duration of the activity in hours, minutes, seconds.</li> <li> <strong>Average Pace</strong> : Pace of the activity, in minutes per km.</li> <li> <strong>Average Speed (km/h)</strong> : Average speed in km/hr.</li> <li> <strong>Calories Burned</strong> : No. of calories burned during the activity. I wouldn’t take this as precise but it’s a rough estimate.</li> <li> <strong>Climb (m)</strong> : Total climb during the activity, in meters.</li> </ol> <h2 id="exploration">Exploration</h2> <p>First, setting the Date variable to index and checking how the distance covered has changed over time.</p> <h4 id="distance">Distance</h4> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/runkeeper/distance-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/runkeeper/distance-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/runkeeper/distance-1400.webp"></source> <img src="/assets/img/runkeeper/distance.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Distance over time" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <ul> <li>There was a huge gap between late 2019 and late 2020 (in part due to the pandemic lockdowns). And when I started, I started slow.</li> <li>The distances were usually tied to set routes that I would take depending on where I lived (in Singapore) and what was a scenic walk aroudn that area.</li> <li>For most of 2021 I was living in one place and I must have tried a few different routes then. You can see a big jump in distance when I found a long route that was scenic (around the Singapore River along the Waterfront/Promenade area).</li> <li>In late 2021 I moved to another apartment and stuck to a steady route of just under 8 km until August 2022.</li> <li>And then there was a gap again when I moved to Bremen in Germany and I only picked back up towards October after settling in.</li> <li>For the whole of 2023 I stuck to one standard route of around 7 km near my apartment, along the edge of Burger Park, the big park in the centre of Bremen.</li> <li>Around late July in 2023 I moved to another apartment and I found another route, which was slightly longer at 8 km, again along a nice scenic area next to the Weser river in Bremen.</li> <li>The scattered points of smaller distances in between the “steady” phases (early 2022 and 2023, 2024) might have been instances of the RunKeeper app not syncing properly, not detecting start and/or stops due to lack of wifi/4G data or just me stopping early due to getting tired or injured.</li> </ul> <h4 id="duration">Duration</h4> <p>Next up_ Duration. This might be highly correlated with distance because I generally follow the same pace - walking for around 2 minutes followed by jogging/sprinting for 1 minute or so, on average. The variable is in hours:minutes:seconds format, and some entries were under 1 hour, so it needs to be converted into seconds for analysis.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">duration_to_seconds</span><span class="p">(</span><span class="n">duration</span><span class="p">):</span>
    <span class="n">parts</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="nf">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">duration</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="s">:</span><span class="sh">'</span><span class="p">)))</span>
    <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>   <span class="c1"># for when it's under an hour
</span>        <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span> <span class="o">=</span> <span class="n">parts</span>
        <span class="k">return</span> <span class="n">minutes</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">+</span> <span class="n">seconds</span>
    <span class="k">elif</span> <span class="nf">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>  <span class="c1">#for when it's an hour or more
</span>        <span class="n">hours</span><span class="p">,</span> <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span> <span class="o">=</span> <span class="n">parts</span>
        <span class="k">return</span> <span class="n">hours</span> <span class="o">*</span> <span class="mi">3600</span> <span class="o">+</span> <span class="n">minutes</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">+</span> <span class="n">seconds</span>
    

<span class="n">cardio</span><span class="p">[</span><span class="sh">'</span><span class="s">Duration (seconds)</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">cardio</span><span class="p">[</span><span class="sh">'</span><span class="s">Duration</span><span class="sh">'</span><span class="p">].</span><span class="nf">apply</span><span class="p">(</span><span class="n">duration_to_seconds</span><span class="p">)</span>
</code></pre></div></div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/runkeeper/duration-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/runkeeper/duration-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/runkeeper/duration-1400.webp"></source> <img src="/assets/img/runkeeper/duration.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Duration over time" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>As expected, duration and distance are highly correlated. The longer the distance, the longer the duration. Some variations could be because of incorrect syncing of the RunKeeper app and other issues.</p> <h4 id="average-pace-and-speed">Average pace and speed</h4> <p>Average pace and speed should generally be consistent, give or take variations due to the app measurement. The values for Average pace need to be converted from minutes:seconds to seconds though.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">pace_to_seconds</span><span class="p">(</span><span class="n">pace</span><span class="p">):</span>
    <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span> <span class="o">=</span> <span class="nf">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">pace</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="s">:</span><span class="sh">'</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">minutes</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">+</span> <span class="n">seconds</span>

<span class="n">cardio</span><span class="p">[</span><span class="sh">'</span><span class="s">Average Pace (seconds)</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">cardio</span><span class="p">[</span><span class="sh">'</span><span class="s">Average Pace</span><span class="sh">'</span><span class="p">].</span><span class="nf">apply</span><span class="p">(</span><span class="n">pace_to_seconds</span><span class="p">)</span>
</code></pre></div></div> <p>Also, as it turns out, there were some outliers in the data, with some records showing that I take over an hour for a kilometer! This must have been me accidentally turning the RunKeeper activitiy on or forgetting to stop the timer. I removed these outliers.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/runkeeper/pace_speed-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/runkeeper/pace_speed-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/runkeeper/pace_speed-1400.webp"></source> <img src="/assets/img/runkeeper/pace_speed.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Average pace and speed" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>That’s more like it. I usually average around 9 to 10 minutes per km (including walks + sprints). And Average speed almost mirrors the pace, as expected. There might have been a slight increase in speed in late 2023 to early 2024, despite the distance being generally the same. This may have been due to me trying to push myself a bit more.</p> <h4 id="calories-burned">Calories burned</h4> <p>Calories burned also seems to have outliers (some to the order of 8). No way am I burning calories to the order of 8! The duration, pace and distances of the outliers seem normla but calories burned is way off. This has to be an error with the app features. I remove these outliers obviously.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/runkeeper/calories-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/runkeeper/calories-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/runkeeper/calories-1400.webp"></source> <img src="/assets/img/runkeeper/calories.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Calories burned" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>That makes sense. Fairly simple correlation between distance run and calories burned. The app does not track calories through heart rate or other biometric data, so it’s a rough estimate based on distance and pace. So this makes sense.</p> <p>As expected, I see a slight jump in calories burned in late 2023 and early 2024, despite the Distance and Duration being approximately the same in this period. This dropped back down around mid 2024 to a normal level. This again confirms my intuition that this was due to a slight increase in speed (which can also be seen in the slight drop in the Average Pace graph and increase in the Average Speed graph), as I remember exerting myself a little more during that period, with faster sprints.</p> <p>This is good insight - helps me try and push myself a little more, knowing I can do it since I know I have done it before.</p> <h4 id="climb">Climb</h4> <p>Not sure what I can glean from change in the climb over time. I have usually taken flat routes (with some stairs, overhead bridges across roads etc. sometimes) don’t think I have changed my routes much. I will look at the data to see if there is any pattern.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/runkeeper/climb-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/runkeeper/climb-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/runkeeper/climb-1400.webp"></source> <img src="/assets/img/runkeeper/climb.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Climb" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Hmmm, this is interesting. The routes after I moved to Bremen have been flat. The routes in Singapore (pre-2022 August) have had some climb. I realise that there were no stairs or overhead bridges that I traversed in Bremen, whereas those were quite common in Singapore.</p> <h4 id="activity-start-time">Activity start time</h4> <p>Lastly, I was also curious about the times during the day that I start a run. Sometimes this is helpful when I feel lazy close to sunset and think that it is too late, but in reality I may have started a run at that time before.</p> <p>RunKeeper records the time at which I press the start timer. I remember getting the workouts in Singapore after sunset, sometimes even well into the night, because of the cooler weather. When I moved to Bremen I continued this habit for a while, even during winter when it got really cold. But slowly I started running earlier, before the sunset to catch as much light as I could outside.</p> <p>For this, I had to extract the hour from the Date variable, convert it to seconds and then plot it against the Date.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cardio</span><span class="p">[</span><span class="sh">'</span><span class="s">Time</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">cardio</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">time</span>
<span class="n">cardio</span><span class="p">[</span><span class="sh">'</span><span class="s">Time_seconds</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">cardio</span><span class="p">[</span><span class="sh">'</span><span class="s">Time</span><span class="sh">'</span><span class="p">].</span><span class="nf">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">.</span><span class="n">hour</span> <span class="o">*</span> <span class="mi">3600</span> <span class="o">+</span> <span class="n">x</span><span class="p">.</span><span class="n">minute</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">+</span> <span class="n">x</span><span class="p">.</span><span class="n">second</span><span class="p">)</span>
</code></pre></div></div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/runkeeper/activity_time-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/runkeeper/activity_time-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/runkeeper/activity_time-1400.webp"></source> <img src="/assets/img/runkeeper/activity_time.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Activity start time" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>As expected, the workouts were usually in the evening before late 2022, after it got dark. Some were even well into the night, close to 10 pm. Looking back at it now, I can’t believe I was out that late!</p> <p>But after moving to Bremen, I started running earlier, before the sunset, to catch as much light as I could outside. This also meant that I would change my start time to match the changing sunset times throughout the seasons in the year, usually around 1 hour or so before the sunset. This can be seen in the wave like pattern in the graph post 2023.</p> <h4 id="comparison-of-activity-time-with-sunset-time">Comparison of activity time with sunset time</h4> <p>Just to visualise this, I also wanted to overlay this graph with the sunset times - in Singapore for pre-2022 August and in Bremen for post-2022 August. Getting the sunset times was not as easy as I thought. After some research, I found a Python package called pvlib which can retrieve the sunset times from the past for specific latitude and longitude coordinates.</p> <p>Since the sunset times for Singapore and Bremen are obviously different, I got the sunset times in Singapore for dates from 2018-06-01 to 2022-08-01 and in Bremen for dates from 2022-08-01 to 2024-12-31.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sg_lat</span> <span class="o">=</span>  <span class="mf">1.35</span>
<span class="n">sg_long</span> <span class="o">=</span> <span class="mf">103.82</span>
<span class="n">sg_timezone</span> <span class="o">=</span> <span class="sh">"</span><span class="s">Singapore</span><span class="sh">"</span>
<span class="n">sg_dates</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="sh">"</span><span class="s">2018-06-01 </span><span class="sh">"</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s">2022-08-01</span><span class="sh">"</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="sh">"</span><span class="s">D</span><span class="sh">"</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="n">sg_timezone</span><span class="p">)</span>
<span class="n">sg</span> <span class="o">=</span> <span class="n">pvlib</span><span class="p">.</span><span class="n">location</span><span class="p">.</span><span class="nc">Location</span><span class="p">(</span><span class="n">sg_lat</span><span class="p">,</span> <span class="n">sg_long</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="n">sg_timezone</span><span class="p">)</span>
<span class="n">sg_sun_times</span> <span class="o">=</span> <span class="n">sg</span><span class="p">.</span><span class="nf">get_sun_rise_set_transit</span><span class="p">(</span><span class="n">sg_dates</span><span class="p">)</span>

<span class="n">br_lat</span> <span class="o">=</span>  <span class="mf">53.07</span>
<span class="n">br_long</span> <span class="o">=</span> <span class="mf">8.80</span>
<span class="n">br_timezone</span> <span class="o">=</span> <span class="sh">"</span><span class="s">Europe/Berlin</span><span class="sh">"</span>
<span class="n">br_dates</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="sh">"</span><span class="s">2022-08-01</span><span class="sh">"</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s">2024-12-31</span><span class="sh">"</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="sh">"</span><span class="s">D</span><span class="sh">"</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="n">br_timezone</span><span class="p">)</span>
<span class="n">br</span> <span class="o">=</span> <span class="n">pvlib</span><span class="p">.</span><span class="n">location</span><span class="p">.</span><span class="nc">Location</span><span class="p">(</span><span class="n">br_lat</span><span class="p">,</span> <span class="n">br_long</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="n">br_timezone</span><span class="p">)</span>
<span class="n">br_sun_times</span> <span class="o">=</span> <span class="n">br</span><span class="p">.</span><span class="nf">get_sun_rise_set_transit</span><span class="p">(</span><span class="n">br_dates</span><span class="p">)</span>

</code></pre></div></div> <p>Both these returned a dataframe with sunrise, sunset and transit times for each day in YYYY-MM-DD HH:MM:SS format. I just had to get the sunset times from these, extract the date and time from each row, convert the time to seconds for calculation and merge the dataframe for each location with the cardio dataframe. That automatically extracted the cardio data corresponding dates for each location.</p> <p>For example:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sg_sunset_df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">({</span>
    <span class="sh">"</span><span class="s">Date</span><span class="sh">"</span><span class="p">:</span> <span class="n">sg_sun_times</span><span class="p">[</span><span class="sh">'</span><span class="s">sunset</span><span class="sh">'</span><span class="p">].</span><span class="n">dt</span><span class="p">.</span><span class="n">date</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">Sunset_Time</span><span class="sh">"</span><span class="p">:</span> <span class="n">sg_sun_times</span><span class="p">[</span><span class="sh">'</span><span class="s">sunset</span><span class="sh">'</span><span class="p">].</span><span class="n">dt</span><span class="p">.</span><span class="n">time</span>
<span class="p">})</span>

<span class="n">sg_sunset_df</span><span class="p">[</span><span class="sh">'</span><span class="s">Sunset_Time_Seconds</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">sg_sunset_df</span><span class="p">[</span><span class="sh">'</span><span class="s">Sunset_Time</span><span class="sh">'</span><span class="p">].</span><span class="nf">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">.</span><span class="n">hour</span> <span class="o">*</span> <span class="mi">3600</span> <span class="o">+</span> <span class="n">x</span><span class="p">.</span><span class="n">minute</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">+</span> <span class="n">x</span><span class="p">.</span><span class="n">second</span><span class="p">)</span>
<span class="n">sg_sunset_df</span><span class="p">.</span><span class="nf">set_index</span><span class="p">(</span><span class="sh">'</span><span class="s">Date</span><span class="sh">'</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">cardio</span><span class="p">[</span><span class="sh">'</span><span class="s">Date</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">cardio</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">date</span>  <span class="c1"># Extract the date component from the index of df2
</span><span class="n">cardio</span><span class="p">.</span><span class="nf">set_index</span><span class="p">(</span><span class="sh">'</span><span class="s">Date</span><span class="sh">'</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">sg_merged_df</span> <span class="o">=</span> <span class="n">cardio</span><span class="p">.</span><span class="nf">merge</span><span class="p">(</span><span class="n">sg_sunset_df</span><span class="p">,</span> <span class="n">left_index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/runkeeper/sg_sunset-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/runkeeper/sg_sunset-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/runkeeper/sg_sunset-1400.webp"></source> <img src="/assets/img/runkeeper/sg_sunset.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Activity start time vs Singapore sunset time" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>As mentioned earlier, the workouts in Singapore were usually in the evening well after the sun had gone down, and some even late into the night. This also speaks to how safe Singapore is, and also how well-lit and well-maintained the main roads are throughout the island.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/runkeeper/br_sunset-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/runkeeper/br_sunset-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/runkeeper/br_sunset-1400.webp"></source> <img src="/assets/img/runkeeper/br_sunset.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Activity start time vs Bremen sunset time" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>In Bremen, I initially started getting out after sunset, as that was what I was used to. Then I started running earlier, partly because it was cold and dark in the winter period, and partly because I wanted to catch as much light as I could outside. Soon I started following the seasonal pattern of sunset times, almost mirroring it exactly and only very rarley did I start after the sun had gone down.</p> <p>One more point - I can also clearly see how I adjusted my workout start times to the Daylight savings, when the clocks went forward an hour in March and back in October. I started running an hour later from late March and an hour earlier from October onwards to catch the light before the sunset.</p> <p>A bit of fancy visualisation to add: I wanted to also see how I run “past the sunset”, i.e. I might start before the sun went down but by the time I had returned, it would have been past the sunset (although it was still light outside - the “twilight” period). So I added a vertical line starting at each Activity start time, proportional to the Duration of that corresponding activity, to show how I crossed the sunset time.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/runkeeper/br_sunset_with_duration-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/runkeeper/br_sunset_with_duration-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/runkeeper/br_sunset_with_duration-1400.webp"></source> <img src="/assets/img/runkeeper/br_sunset_with_duration.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Activity start time vs Bremen sunset time with Duration" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>That looks nice. So I did finish after the sunset time for the most part of the winter but in the summer of 2024 I began to prefer getting to be outside more when the sun was out so rarely did I cross the sunset time then.</p> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2025 Suraj Karakulath. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>